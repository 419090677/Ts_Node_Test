var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
Object.defineProperty(exports, "__esModule", { value: true });
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
    };
    GameConfig.width = 750;
    GameConfig.height = 1334;
    GameConfig.scaleMode = "fixedheight";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "top";
    GameConfig.alignH = "center";
    GameConfig.startScene = "test/test.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = false;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var Centre_1 = require("./script/mvc/centre/Centre");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
        Centre_1.mvc_Centre.Centre.getInstance().openView("LoginView");
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1,"./script/mvc/centre/Centre":3}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/* 该脚本在游戏开始时被GameManager初始化 */
var mvc_Centre;
(function (mvc_Centre) {
    var Centre = /** @class */ (function () {
        function Centre() {
            this.InitController();
            this.InitModel();
            this.InitView();
        }
        Centre.getInstance = function () {
            if (!Centre.instance) {
                Centre.instance = new Centre();
            }
            return Centre.instance;
        };
        Centre.prototype.InitController = function () {
            this.controller = new Controller();
            this.controller.registerController("LoginController", new LoginController());
        };
        ;
        Centre.prototype.InitModel = function () {
            this.model = new Model();
            this.model.registerModel("LoginModel", new LoginModel());
        };
        ;
        Centre.prototype.InitView = function () {
            this.view = new View();
            this.view.registerView("LoginView", new LoginView("test/test.scene"));
        };
        ;
        Centre.prototype.registerController = function (key, Controller) {
            this.controller.registerController(key, Controller);
        };
        Centre.prototype.unregisterController = function (key) {
            this.controller.unregisterController(key);
        };
        Centre.prototype.executeController = function (key) {
            var param = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                param[_i - 1] = arguments[_i];
            }
            this.controller.execute(key, param);
        };
        Centre.prototype.obtainController = function (key) {
            return this.controller.obtainController(key);
        };
        Centre.prototype.registerModel = function (key, model) {
            this.model.registerModel(key, model);
        };
        Centre.prototype.unregisterModel = function (key) {
            this.model.unregisterModel(key);
        };
        Centre.prototype.obtainModel = function (key) {
            return this.model.obtainModel(key);
        };
        Centre.prototype.registerView = function (key, view) {
            this.view.registerView(key, view);
        };
        Centre.prototype.unregisterView = function (key, view) {
            this.view.unregisterView(key);
        };
        Centre.prototype.obtainView = function (key) {
            return this.view.obtainView(key);
        };
        Centre.prototype.openView = function (key, closeOther, param) {
            if (closeOther === void 0) { closeOther = true; }
            if (param === void 0) { param = {}; }
            this.obtainView(key).openView(closeOther, param);
        };
        return Centre;
    }());
    mvc_Centre.Centre = Centre;
    var Controller = /** @class */ (function () {
        function Controller() {
            this.controllers = {};
        }
        Controller.prototype.registerController = function (key, controller) {
            if (this.controllers[key]) {
                console.warn("Model key:" + key + " has already exits");
            }
            else {
                this.controllers[key] = controller;
            }
        };
        Controller.prototype.unregisterController = function (key) {
            if (this.controllers[key] != null) {
                this.controllers[key] = null;
                delete this.controllers[key];
            }
        };
        Controller.prototype.obtainController = function (key) {
            return this.controllers[key];
        };
        Controller.prototype.execute = function (key, param) {
            if (this.controllers[key] != null) {
                this.controllers[key].execute(param);
            }
        };
        return Controller;
    }());
    var Model = /** @class */ (function () {
        function Model() {
            this.models = {};
        }
        Model.prototype.registerModel = function (key, model) {
            if (this.models[key]) {
                console.warn("Models key:" + key + " has already exits");
            }
            else {
                this.models[key] = model;
            }
        };
        Model.prototype.unregisterModel = function (key) {
            if (this.models[key] != null) {
                this.models[key] = null;
                delete this.models[key];
            }
        };
        Model.prototype.obtainModel = function (key) {
            return this.models[key];
        };
        return Model;
    }());
    var View = /** @class */ (function () {
        function View() {
            /**
             * 已注册的UI
             */
            // private _views: IView[];
            /**
             * 开启中UI
             */
            this.views = {};
        }
        View.prototype.registerView = function (key, view) {
            if (this.views[key]) {
                console.warn("Models key:" + key + " has already exits");
            }
            else {
                this.views[key] = view;
            }
        };
        View.prototype.unregisterView = function (key) {
            if (this.views[key] != null) {
                this.views[key] = null;
                delete this.views[key];
            }
        };
        View.prototype.obtainView = function (key) {
            return this.views[key];
        };
        return View;
    }());
    var ViewBase = /** @class */ (function () {
        function ViewBase(url) {
            this.url = url;
        }
        ViewBase.prototype.openView = function (closeOther, param) {
            if (closeOther === void 0) { closeOther = true; }
            if (param === void 0) { param = {}; }
            Laya.Scene.open(this.url, closeOther, param, Laya.Handler.create(this, function (data) {
                if (data) {
                    this.viewObj = data;
                    console.log("load laya view success");
                    this.onViewLoaded();
                }
                else {
                    console.warn("view is not founded, please check url");
                }
            }.bind(this)), Laya.Handler.create(this, function (data) {
                this;
            }.bind(this)));
        };
        ViewBase.prototype.onViewLoaded = function () {
        };
        return ViewBase;
    }());
    var ModelBase = /** @class */ (function () {
        function ModelBase() {
        }
        return ModelBase;
    }());
    var ControllerBase = /** @class */ (function () {
        function ControllerBase() {
        }
        return ControllerBase;
    }());
    var LoginView = /** @class */ (function (_super) {
        __extends(LoginView, _super);
        function LoginView(url) {
            return _super.call(this, url) || this;
        }
        LoginView.prototype.onViewLoaded = function () {
            this.viewObj.btn1.on(Laya.Event.MOUSE_DOWN, this.viewObj, function () {
                this.viewObj.login_world_bg.visible = false;
                Laya.Scene3D.load("res/Conventional/demo.ls", Laya.Handler.create(this, function (data) {
                    this.scene = data;
                    Laya.stage.addChild(data);
                    Laya.Sprite3D.load("res/Conventional/Wall_Stone_el1.lh", Laya.Handler.create(this, function (sp) {
                        this.scene.addChild(sp);
                    }.bind(this)));
                }.bind(this)));
            }.bind(this));
            this.viewObj.btn2.on(Laya.Event.MOUSE_DOWN, this.viewObj, function () {
                this.viewObj.login_select_bg.visible = false;
                var a = new Son("my name");
                a.PrintName();
                var socket = window['io']();
                socket.emit("socketIoTest", { package: 123 });
                socket.on("ServerSendMsg", function (data) {
                    console.log(data);
                });
            }.bind(this));
        };
        return LoginView;
    }(ViewBase));
    var LoginController = /** @class */ (function (_super) {
        __extends(LoginController, _super);
        function LoginController() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        LoginController.prototype.execute = function (param) {
        };
        return LoginController;
    }(ControllerBase));
    var LoginModel = /** @class */ (function (_super) {
        __extends(LoginModel, _super);
        function LoginModel() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return LoginModel;
    }(ModelBase));
})(mvc_Centre = exports.mvc_Centre || (exports.mvc_Centre = {}));
},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL+ahjOmdoi9sbHdqL0xheWFBaXJJREUvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcudHMiLCJzcmMvTWFpbi50cyIsInNyYy9zY3JpcHQvbXZjL2NlbnRyZS9DZW50cmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQSxnR0FBZ0c7O0FBRWhHOztFQUVFO0FBQ0Y7SUFhSTtJQUFjLENBQUM7SUFDUixlQUFJLEdBQVg7UUFDSSxJQUFJLEdBQUcsR0FBYSxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQztJQUVqRCxDQUFDO0lBaEJNLGdCQUFLLEdBQVEsR0FBRyxDQUFDO0lBQ2pCLGlCQUFNLEdBQVEsSUFBSSxDQUFDO0lBQ25CLG9CQUFTLEdBQVEsYUFBYSxDQUFDO0lBQy9CLHFCQUFVLEdBQVEsTUFBTSxDQUFDO0lBQ3pCLGlCQUFNLEdBQVEsS0FBSyxDQUFDO0lBQ3BCLGlCQUFNLEdBQVEsUUFBUSxDQUFDO0lBQ3ZCLHFCQUFVLEdBQUssaUJBQWlCLENBQUM7SUFDakMsb0JBQVMsR0FBUSxFQUFFLENBQUM7SUFDcEIsZ0JBQUssR0FBUyxLQUFLLENBQUM7SUFDcEIsZUFBSSxHQUFTLEtBQUssQ0FBQztJQUNuQix1QkFBWSxHQUFTLEtBQUssQ0FBQztJQUMzQiw0QkFBaUIsR0FBUyxJQUFJLENBQUM7SUFNMUMsaUJBQUM7Q0FsQkQsQUFrQkMsSUFBQTtrQkFsQm9CLFVBQVU7QUFtQi9CLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7OztBQ3hCbEIsMkNBQXNDO0FBQ3RDLHFEQUF3RDtBQUN4RDtJQUNDO1FBQ0MsZ0JBQWdCO1FBQ2hCLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQztZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsb0JBQVUsQ0FBQyxLQUFLLEVBQUUsb0JBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQzs7WUFDbEUsSUFBSSxDQUFDLElBQUksQ0FBQyxvQkFBVSxDQUFDLEtBQUssRUFBRSxvQkFBVSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNuRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQzVDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDbEQsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsb0JBQVUsQ0FBQyxTQUFTLENBQUM7UUFDNUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsb0JBQVUsQ0FBQyxVQUFVLENBQUM7UUFDOUMsb0JBQW9CO1FBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUMsaUJBQWlCLEdBQUcsb0JBQVUsQ0FBQyxpQkFBaUIsQ0FBQztRQUUxRCxvREFBb0Q7UUFDcEQsSUFBSSxvQkFBVSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsSUFBSSxNQUFNO1lBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDOUYsSUFBSSxvQkFBVSxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUMsa0JBQWtCLENBQUM7WUFBRSxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUMzRixJQUFJLG9CQUFVLENBQUMsSUFBSTtZQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDdEMsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQztRQUU3QixnREFBZ0Q7UUFDaEQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3JJLENBQUM7SUFFRCw4QkFBZSxHQUFmO1FBQ0MsK0NBQStDO1FBQy9DLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO0lBQ2pHLENBQUM7SUFFRCw2QkFBYyxHQUFkO1FBQ0MsWUFBWTtRQUNaLG9CQUFVLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLG9CQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDaEUsbUJBQVUsQ0FBQyxNQUFNLENBQUMsV0FBVyxFQUFFLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3ZELENBQUM7SUFDRixXQUFDO0FBQUQsQ0FoQ0EsQUFnQ0MsSUFBQTtBQUNELE9BQU87QUFDUCxJQUFJLElBQUksRUFBRSxDQUFDOzs7O0FDbENYLDhCQUE4QjtBQUM5QixJQUFjLFVBQVUsQ0FzVHZCO0FBdFRELFdBQWMsVUFBVTtJQUNwQjtRQVdJO1lBQ0ksSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ3RCLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNqQixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDcEIsQ0FBQztRQWJhLGtCQUFXLEdBQXpCO1lBQ0ksSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUU7Z0JBQ2xCLE1BQU0sQ0FBQyxRQUFRLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQzthQUNsQztZQUNELE9BQU8sTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUMzQixDQUFDO1FBVU8sK0JBQWMsR0FBdEI7WUFFSSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksVUFBVSxFQUFFLENBQUM7WUFDbkMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxrQkFBa0IsQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLGVBQWUsRUFBRSxDQUFDLENBQUM7UUFDakYsQ0FBQztRQUFBLENBQUM7UUFDTSwwQkFBUyxHQUFqQjtZQUVJLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztZQUN6QixJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxZQUFZLEVBQUUsSUFBSSxVQUFVLEVBQUUsQ0FBQyxDQUFDO1FBQzdELENBQUM7UUFBQSxDQUFDO1FBQ00seUJBQVEsR0FBaEI7WUFFSSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7WUFDdkIsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLElBQUksU0FBUyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztRQUMxRSxDQUFDO1FBQUEsQ0FBQztRQUVLLG1DQUFrQixHQUF6QixVQUEwQixHQUFXLEVBQUUsVUFBdUI7WUFDMUQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDeEQsQ0FBQztRQUVNLHFDQUFvQixHQUEzQixVQUE0QixHQUFXO1lBQ25DLElBQUksQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDOUMsQ0FBQztRQUVNLGtDQUFpQixHQUF4QixVQUF5QixHQUFXO1lBQUUsZUFBZTtpQkFBZixVQUFlLEVBQWYscUJBQWUsRUFBZixJQUFlO2dCQUFmLDhCQUFlOztZQUNqRCxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDeEMsQ0FBQztRQUVNLGlDQUFnQixHQUF2QixVQUF3QixHQUFXO1lBQy9CLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNqRCxDQUFDO1FBR00sOEJBQWEsR0FBcEIsVUFBcUIsR0FBVyxFQUFFLEtBQWE7WUFDM0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3pDLENBQUM7UUFFTSxnQ0FBZSxHQUF0QixVQUF1QixHQUFXO1lBQzlCLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3BDLENBQUM7UUFFTSw0QkFBVyxHQUFsQixVQUFtQixHQUFXO1lBQzFCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdkMsQ0FBQztRQUVNLDZCQUFZLEdBQW5CLFVBQW9CLEdBQVUsRUFBRSxJQUFVO1lBRXRDLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUN0QyxDQUFDO1FBRU0sK0JBQWMsR0FBckIsVUFBc0IsR0FBVSxFQUFFLElBQVU7WUFFeEMsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbEMsQ0FBQztRQUNNLDJCQUFVLEdBQWpCLFVBQWtCLEdBQVc7WUFDekIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNyQyxDQUFDO1FBQ00seUJBQVEsR0FBZixVQUFnQixHQUFVLEVBQUUsVUFBeUIsRUFBRSxLQUFhO1lBQXhDLDJCQUFBLEVBQUEsaUJBQXlCO1lBQUUsc0JBQUEsRUFBQSxVQUFhO1lBRWhFLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNyRCxDQUFDO1FBc0NMLGFBQUM7SUFBRCxDQW5IQSxBQW1IQyxJQUFBO0lBbkhZLGlCQUFNLFNBbUhsQixDQUFBO0lBRUQ7UUFBQTtZQUNZLGdCQUFXLEdBQW1DLEVBQUUsQ0FBQztRQTRCN0QsQ0FBQztRQTFCVSx1Q0FBa0IsR0FBekIsVUFBMEIsR0FBVyxFQUFFLFVBQXVCO1lBQzFELElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDdkIsT0FBTyxDQUFDLElBQUksQ0FBQyxlQUFhLEdBQUcsdUJBQW9CLENBQUMsQ0FBQzthQUN0RDtpQkFDSTtnQkFDRCxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFVBQVUsQ0FBQzthQUN0QztRQUNMLENBQUM7UUFFTSx5Q0FBb0IsR0FBM0IsVUFBNEIsR0FBVztZQUNuQyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxFQUFFO2dCQUMvQixJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQztnQkFDN0IsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ2hDO1FBQ0wsQ0FBQztRQUVNLHFDQUFnQixHQUF2QixVQUF3QixHQUFXO1lBRS9CLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNqQyxDQUFDO1FBRU0sNEJBQU8sR0FBZCxVQUFlLEdBQVcsRUFBRSxLQUFZO1lBQ3BDLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLEVBQUU7Z0JBQy9CLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQ3hDO1FBQ0wsQ0FBQztRQUNMLGlCQUFDO0lBQUQsQ0E3QkEsQUE2QkMsSUFBQTtJQUVEO1FBQUE7WUFDWSxXQUFNLEdBQThCLEVBQUUsQ0FBQztRQXFCbkQsQ0FBQztRQW5CVSw2QkFBYSxHQUFwQixVQUFxQixHQUFXLEVBQUUsS0FBYTtZQUMzQyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ2xCLE9BQU8sQ0FBQyxJQUFJLENBQUMsZ0JBQWMsR0FBRyx1QkFBb0IsQ0FBQyxDQUFDO2FBQ3ZEO2lCQUNJO2dCQUNELElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDO2FBQzVCO1FBQ0wsQ0FBQztRQUVNLCtCQUFlLEdBQXRCLFVBQXVCLEdBQVc7WUFDOUIsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksRUFBRTtnQkFDMUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUM7Z0JBQ3hCLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUMzQjtRQUNMLENBQUM7UUFFTSwyQkFBVyxHQUFsQixVQUFtQixHQUFXO1lBQzFCLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM1QixDQUFDO1FBQ0wsWUFBQztJQUFELENBdEJBLEFBc0JDLElBQUE7SUFFRDtRQUFBO1lBRUk7O2VBRUc7WUFDSCwyQkFBMkI7WUFDM0I7O2VBRUc7WUFDSyxVQUFLLEdBQTZCLEVBQUUsQ0FBQztRQWdDakQsQ0FBQztRQXRCVSwyQkFBWSxHQUFuQixVQUFvQixHQUFVLEVBQUUsSUFBVTtZQUV0QyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ2pCLE9BQU8sQ0FBQyxJQUFJLENBQUMsZ0JBQWMsR0FBRyx1QkFBb0IsQ0FBQyxDQUFDO2FBQ3ZEO2lCQUNJO2dCQUNELElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDO2FBQzFCO1FBQ0wsQ0FBQztRQUVNLDZCQUFjLEdBQXJCLFVBQXNCLEdBQVU7WUFFNUIsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksRUFBRTtnQkFDekIsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUM7Z0JBQ3ZCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUMxQjtRQUNMLENBQUM7UUFFTSx5QkFBVSxHQUFqQixVQUFrQixHQUFVO1lBRXhCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMzQixDQUFDO1FBQ0wsV0FBQztJQUFELENBekNBLEFBeUNDLElBQUE7SUFTRDtRQUdJLGtCQUFZLEdBQUc7WUFDWCxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNuQixDQUFDO1FBQ00sMkJBQVEsR0FBZixVQUFnQixVQUF5QixFQUFFLEtBQWE7WUFBeEMsMkJBQUEsRUFBQSxpQkFBeUI7WUFBRSxzQkFBQSxFQUFBLFVBQWE7WUFFcEQsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxVQUFTLElBQUk7Z0JBQ2hGLElBQUcsSUFBSSxFQUFDO29CQUNKLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO29CQUNwQixPQUFPLENBQUMsR0FBRyxDQUFDLHdCQUF3QixDQUFDLENBQUM7b0JBQ3RDLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztpQkFDdkI7cUJBRUQ7b0JBQ0ksT0FBTyxDQUFDLElBQUksQ0FBQyx1Q0FBdUMsQ0FBQyxDQUFBO2lCQUN4RDtZQUNMLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsVUFBUyxJQUFJO2dCQUNsRCxJQUFJLENBQUM7WUFDVCxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuQixDQUFDO1FBQ00sK0JBQVksR0FBbkI7UUFHQSxDQUFDO1FBQ0wsZUFBQztJQUFELENBMUJBLEFBMEJDLElBQUE7SUFJRDtRQUNJO1FBRUEsQ0FBQztRQUVMLGdCQUFDO0lBQUQsQ0FMQSxBQUtDLElBQUE7SUFLRDtRQUNJO1FBRUEsQ0FBQztRQUVMLHFCQUFDO0lBQUQsQ0FMQSxBQUtDLElBQUE7SUFFRDtRQUF3Qiw2QkFBUTtRQUM1QixtQkFBWSxHQUFHO21CQUVYLGtCQUFNLEdBQUcsQ0FBQztRQUNkLENBQUM7UUFFTSxnQ0FBWSxHQUFuQjtZQUVLLElBQUksQ0FBQyxPQUEwQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRTtnQkFDekUsSUFBSSxDQUFDLE9BQTBCLENBQUMsY0FBYyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7Z0JBQ2hFLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLDBCQUEwQixFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxVQUFTLElBQUk7b0JBQ2pGLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO29CQUNsQixJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFDMUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsb0NBQW9DLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFVBQVMsRUFBRTt3QkFDMUYsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7b0JBQzVCLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNuQixDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUNsQixDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFFYixJQUFJLENBQUMsT0FBMkIsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUU7Z0JBQzFFLElBQUksQ0FBQyxPQUEyQixDQUFDLGVBQWUsQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO2dCQUNsRSxJQUFJLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztnQkFDM0IsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDO2dCQUNkLElBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO2dCQUM1QixNQUFNLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxFQUFDLE9BQU8sRUFBQyxHQUFHLEVBQUMsQ0FBQyxDQUFDO2dCQUMzQyxNQUFNLENBQUMsRUFBRSxDQUFDLGVBQWUsRUFBRSxVQUFTLElBQUk7b0JBQ3BDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ3RCLENBQUMsQ0FBQyxDQUFDO1lBQ1AsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2xCLENBQUM7UUFDTCxnQkFBQztJQUFELENBOUJBLEFBOEJDLENBOUJ1QixRQUFRLEdBOEIvQjtJQUVEO1FBQThCLG1DQUFjO1FBQTVDOztRQUlBLENBQUM7UUFIVSxpQ0FBTyxHQUFkLFVBQWUsS0FBSztRQUVwQixDQUFDO1FBQ0wsc0JBQUM7SUFBRCxDQUpBLEFBSUMsQ0FKNkIsY0FBYyxHQUkzQztJQUVEO1FBQXlCLDhCQUFTO1FBQWxDOztRQUNBLENBQUM7UUFBRCxpQkFBQztJQUFELENBREEsQUFDQyxDQUR3QixTQUFTLEdBQ2pDO0FBQ0wsQ0FBQyxFQXRUYSxVQUFVLEdBQVYsa0JBQVUsS0FBVixrQkFBVSxRQXNUdkIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcblxyXG4vKlxyXG4qIOa4uOaIj+WIneWni+WMlumFjee9rjtcclxuKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbmZpZ3tcclxuICAgIHN0YXRpYyB3aWR0aDpudW1iZXI9NzUwO1xyXG4gICAgc3RhdGljIGhlaWdodDpudW1iZXI9MTMzNDtcclxuICAgIHN0YXRpYyBzY2FsZU1vZGU6c3RyaW5nPVwiZml4ZWRoZWlnaHRcIjtcclxuICAgIHN0YXRpYyBzY3JlZW5Nb2RlOnN0cmluZz1cIm5vbmVcIjtcclxuICAgIHN0YXRpYyBhbGlnblY6c3RyaW5nPVwidG9wXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25IOnN0cmluZz1cImNlbnRlclwiO1xyXG4gICAgc3RhdGljIHN0YXJ0U2NlbmU6YW55PVwidGVzdC90ZXN0LnNjZW5lXCI7XHJcbiAgICBzdGF0aWMgc2NlbmVSb290OnN0cmluZz1cIlwiO1xyXG4gICAgc3RhdGljIGRlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgc3RhdDpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIHBoeXNpY3NEZWJ1Zzpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIGV4cG9ydFNjZW5lVG9Kc29uOmJvb2xlYW49dHJ1ZTtcclxuICAgIGNvbnN0cnVjdG9yKCl7fVxyXG4gICAgc3RhdGljIGluaXQoKXtcclxuICAgICAgICB2YXIgcmVnOiBGdW5jdGlvbiA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcclxuXHJcbiAgICB9XHJcbn1cclxuR2FtZUNvbmZpZy5pbml0KCk7IiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4vR2FtZUNvbmZpZ1wiO1xyXG5pbXBvcnQgeyBtdmNfQ2VudHJlIH0gZnJvbSBcIi4vc2NyaXB0L212Yy9jZW50cmUvQ2VudHJlXCI7XHJcbmNsYXNzIE1haW4ge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0Ly/moLnmja5JREXorr7nva7liJ3lp4vljJblvJXmk45cdFx0XHJcblx0XHRpZiAod2luZG93W1wiTGF5YTNEXCJdKSBMYXlhM0QuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCk7XHJcblx0XHRlbHNlIExheWEuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCwgTGF5YVtcIldlYkdMXCJdKTtcclxuXHRcdExheWFbXCJQaHlzaWNzXCJdICYmIExheWFbXCJQaHlzaWNzXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YVtcIkRlYnVnUGFuZWxcIl0gJiYgTGF5YVtcIkRlYnVnUGFuZWxcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhLnN0YWdlLnNjYWxlTW9kZSA9IEdhbWVDb25maWcuc2NhbGVNb2RlO1xyXG5cdFx0TGF5YS5zdGFnZS5zY3JlZW5Nb2RlID0gR2FtZUNvbmZpZy5zY3JlZW5Nb2RlO1xyXG5cdFx0Ly/lhbzlrrnlvq7kv6HkuI3mlK/mjIHliqDovb1zY2VuZeWQjue8gOWcuuaZr1xyXG5cdFx0TGF5YS5VUkwuZXhwb3J0U2NlbmVUb0pzb24gPSBHYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uO1xyXG5cclxuXHRcdC8v5omT5byA6LCD6K+V6Z2i5p2/77yI6YCa6L+HSURF6K6+572u6LCD6K+V5qih5byP77yM5oiW6ICFdXJs5Zyw5Z2A5aKe5YqgZGVidWc9dHJ1ZeWPguaVsO+8jOWdh+WPr+aJk+W8gOiwg+ivlemdouadv++8iVxyXG5cdFx0aWYgKEdhbWVDb25maWcuZGVidWcgfHwgTGF5YS5VdGlscy5nZXRRdWVyeVN0cmluZyhcImRlYnVnXCIpID09IFwidHJ1ZVwiKSBMYXlhLmVuYWJsZURlYnVnUGFuZWwoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnBoeXNpY3NEZWJ1ZyAmJiBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXSkgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0uZW5hYmxlKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5zdGF0KSBMYXlhLlN0YXQuc2hvdygpO1xyXG5cdFx0TGF5YS5hbGVydEdsb2JhbEVycm9yID0gdHJ1ZTtcclxuXHJcblx0XHQvL+a/gOa0u+i1hOa6kOeJiOacrOaOp+WItu+8jHZlcnNpb24uanNvbueUsUlEReWPkeW4g+WKn+iDveiHquWKqOeUn+aIkO+8jOWmguaenOayoeacieS5n+S4jeW9seWTjeWQjue7rea1geeoi1xyXG5cdFx0TGF5YS5SZXNvdXJjZVZlcnNpb24uZW5hYmxlKFwidmVyc2lvbi5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vblZlcnNpb25Mb2FkZWQpLCBMYXlhLlJlc291cmNlVmVyc2lvbi5GSUxFTkFNRV9WRVJTSU9OKTtcclxuXHR9XHJcblxyXG5cdG9uVmVyc2lvbkxvYWRlZCgpOiB2b2lkIHtcclxuXHRcdC8v5r+A5rS75aSn5bCP5Zu+5pig5bCE77yM5Yqg6L295bCP5Zu+55qE5pe25YCZ77yM5aaC5p6c5Y+R546w5bCP5Zu+5Zyo5aSn5Zu+5ZCI6ZuG6YeM6Z2i77yM5YiZ5LyY5YWI5Yqg6L295aSn5Zu+5ZCI6ZuG77yM6ICM5LiN5piv5bCP5Zu+XHJcblx0XHRMYXlhLkF0bGFzSW5mb01hbmFnZXIuZW5hYmxlKFwiZmlsZWNvbmZpZy5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbkNvbmZpZ0xvYWRlZCkpO1xyXG5cdH1cclxuXHJcblx0b25Db25maWdMb2FkZWQoKTogdm9pZCB7XHJcblx0XHQvL+WKoOi9vUlEReaMh+WumueahOWcuuaZr1xyXG5cdFx0R2FtZUNvbmZpZy5zdGFydFNjZW5lICYmIExheWEuU2NlbmUub3BlbihHYW1lQ29uZmlnLnN0YXJ0U2NlbmUpO1xyXG5cdFx0bXZjX0NlbnRyZS5DZW50cmUuZ2V0SW5zdGFuY2UoKS5vcGVuVmlldyhcIkxvZ2luVmlld1wiKTtcclxuXHR9XHJcbn1cclxuLy/mv4DmtLvlkK/liqjnsbtcclxubmV3IE1haW4oKTtcclxuIiwiaW1wb3J0IHsgdWkgfSBmcm9tIFwiLi4vLi4vLi4vdWkvbGF5YU1heFVJXCI7XHJcblxyXG4vKiDor6XohJrmnKzlnKjmuLjmiI/lvIDlp4vml7booqtHYW1lTWFuYWdlcuWIneWni+WMliAqL1xyXG5leHBvcnQgbW9kdWxlIG12Y19DZW50cmUge1xyXG4gICAgZXhwb3J0IGNsYXNzIENlbnRyZSB7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IENlbnRyZTtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IENlbnRyZSB7XHJcbiAgICAgICAgICAgIGlmICghQ2VudHJlLmluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBDZW50cmUuaW5zdGFuY2UgPSBuZXcgQ2VudHJlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIENlbnRyZS5pbnN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJpdmF0ZSB2aWV3OiBWaWV3O1xyXG4gICAgICAgIHByaXZhdGUgbW9kZWw6IE1vZGVsO1xyXG4gICAgICAgIHByaXZhdGUgY29udHJvbGxlcjogQ29udHJvbGxlcjtcclxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAgICAgdGhpcy5Jbml0Q29udHJvbGxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLkluaXRNb2RlbCgpO1xyXG4gICAgICAgICAgICB0aGlzLkluaXRWaWV3KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIEluaXRDb250cm9sbGVyKCkgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgQ29udHJvbGxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIucmVnaXN0ZXJDb250cm9sbGVyKFwiTG9naW5Db250cm9sbGVyXCIsIG5ldyBMb2dpbkNvbnRyb2xsZXIoKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwcml2YXRlIEluaXRNb2RlbCgpIFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwgPSBuZXcgTW9kZWwoKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5yZWdpc3Rlck1vZGVsKFwiTG9naW5Nb2RlbFwiLCBuZXcgTG9naW5Nb2RlbCgpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHByaXZhdGUgSW5pdFZpZXcoKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudmlldyA9IG5ldyBWaWV3KCk7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5yZWdpc3RlclZpZXcoXCJMb2dpblZpZXdcIiwgbmV3IExvZ2luVmlldyhcInRlc3QvdGVzdC5zY2VuZVwiKSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHVibGljIHJlZ2lzdGVyQ29udHJvbGxlcihrZXk6IHN0cmluZywgQ29udHJvbGxlcjogSUNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnJlZ2lzdGVyQ29udHJvbGxlcihrZXksIENvbnRyb2xsZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVucmVnaXN0ZXJDb250cm9sbGVyKGtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci51bnJlZ2lzdGVyQ29udHJvbGxlcihrZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGV4ZWN1dGVDb250cm9sbGVyKGtleTogc3RyaW5nLCAuLi5wYXJhbTogYW55W10pIHtcclxuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLmV4ZWN1dGUoa2V5LCBwYXJhbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2J0YWluQ29udHJvbGxlcihrZXk6IHN0cmluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250cm9sbGVyLm9idGFpbkNvbnRyb2xsZXIoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgcmVnaXN0ZXJNb2RlbChrZXk6IHN0cmluZywgbW9kZWw6IElNb2RlbCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLnJlZ2lzdGVyTW9kZWwoa2V5LCBtb2RlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdW5yZWdpc3Rlck1vZGVsKGtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwudW5yZWdpc3Rlck1vZGVsKGtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2J0YWluTW9kZWwoa2V5OiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9kZWwub2J0YWluTW9kZWwoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZWdpc3RlclZpZXcoa2V5OnN0cmluZywgdmlldzpJVmlldylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5yZWdpc3RlclZpZXcoa2V5LCB2aWV3KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1bnJlZ2lzdGVyVmlldyhrZXk6c3RyaW5nLCB2aWV3OklWaWV3KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3LnVucmVnaXN0ZXJWaWV3KGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBvYnRhaW5WaWV3KGtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXcub2J0YWluVmlldyhrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgb3BlblZpZXcoa2V5OnN0cmluZywgY2xvc2VPdGhlcjpib29sZWFuID0gdHJ1ZSwgcGFyYW06e30gPSB7fSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMub2J0YWluVmlldyhrZXkpLm9wZW5WaWV3KGNsb3NlT3RoZXIsIHBhcmFtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcHVibGljIGNsb3NlVmlldyhrZXk6IElWaWV3LCBwYXJhbTogYW55W10pIHtcclxuICAgICAgICAvLyAgICAgLy8gdGhpcy52aWV3LmNsb3NlKGtleSwgcGFyYW0pO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBwdWJsaWMgZGVzdHJveUJ5TmFtZXModmlld05hbWUpIHtcclxuICAgICAgICAvLyAgICAgLy8gdGhpcy52aWV3LmRlc3Ryb3lCeU5hbWVzKHZpZXdOYW1lKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gcHVibGljIGRlc3Ryb3lCeU5hbWUodmlld05hbWUpIHtcclxuICAgICAgICAvLyAgICAgLy8gdGhpcy52aWV3LmRlc3Ryb3lCeU5hbWUodmlld05hbWUpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBwdWJsaWMgdW5yZWdpc3RlclZpZXcoa2V5OiBJVmlldykge1xyXG4gICAgICAgIC8vICAgICAvLyB0aGlzLnZpZXcudW5yZWdpc3Rlcih0aGlzLnZpZXcuZ2V0S2V5QnlJbnN0YW5jZShrZXkpKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gcHVibGljIGRlc3Ryb3koa2V5OiBuZXcgKCkgPT4gSVZpZXcsIC4uLnBhcmFtOiBhbnlbXSkge1xyXG4gICAgICAgIC8vICAgICAvLyB0aGlzLnZpZXcuZGVzdHJveShrZXkpO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgLy8gLy8gcHVibGljIG9wZW5WaWV3KGtleTogbmV3ICgpID0+IElWaWV3LCB1aVNob3dUeXBlOiBVSVNob3dUeXBlLCB2aWV3TmFtZTogc3RyaW5nLCAuLi5wYXJhbTogYW55W10pIHtcclxuICAgICAgICAvLyAgICAgLy8gcmV0dXJuIHRoaXMudmlldy5vcGVuKGtleSwgdWlTaG93VHlwZSwgdmlld05hbWUsIHBhcmFtKTtcclxuICAgICAgICAvLyAvLyB9XHJcblxyXG4gICAgICAgIC8vIHB1YmxpYyBnZXRPcGVucygpIHtcclxuICAgICAgICAvLyAgICAgLy8gcmV0dXJuIHRoaXMudmlldy5PcGVucztcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIC8vIHB1YmxpYyBnZXRDbG9zZXMoKSB7XHJcbiAgICAgICAgLy8gICAgIC8vIHJldHVybiB0aGlzLnZpZXcuQ2xvc2VzO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgLy8gcHVibGljIGlzU2hvdyhrZXk6IG5ldyAoKSA9PiBJVmlldykge1xyXG4gICAgICAgIC8vICAgICAvLyBsZXQgdiA9IHRoaXMudmlldy5nZXRVbkRlc3Ryb3lWaWV3KGtleSk7XHJcbiAgICAgICAgLy8gICAgIC8vIHJldHVybiB2ICYmIHYuaXNTaG93KCk7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAvLyBwdWJsaWMgb2J0YWluVmlldzxUIGV4dGVuZHMgSVZpZXc+KGtleTogbmV3ICgpID0+IElWaWV3KSB7XHJcbiAgICAgICAgLy8gICAgIC8vIHJldHVybiB0aGlzLnZpZXcuZ2V0VW5EZXN0cm95VmlldyhrZXkpIGFzIFQ7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBjbGFzcyBDb250cm9sbGVye1xyXG4gICAgICAgIHByaXZhdGUgY29udHJvbGxlcnM6IHsgW2tleTogc3RyaW5nXTogSUNvbnRyb2xsZXIgfSA9IHt9O1xyXG5cclxuICAgICAgICBwdWJsaWMgcmVnaXN0ZXJDb250cm9sbGVyKGtleTogc3RyaW5nLCBjb250cm9sbGVyOiBJQ29udHJvbGxlcikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb250cm9sbGVyc1trZXldKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYE1vZGVsIGtleToke2tleX0gaGFzIGFscmVhZHkgZXhpdHNgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlcnNba2V5XSA9IGNvbnRyb2xsZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1bnJlZ2lzdGVyQ29udHJvbGxlcihrZXk6IHN0cmluZykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb250cm9sbGVyc1trZXldICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlcnNba2V5XSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jb250cm9sbGVyc1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2J0YWluQ29udHJvbGxlcihrZXkgOnN0cmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXJzW2tleV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZXhlY3V0ZShrZXk6IHN0cmluZywgcGFyYW06IGFueVtdKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXJzW2tleV0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyc1trZXldLmV4ZWN1dGUocGFyYW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgIFxyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzIE1vZGVse1xyXG4gICAgICAgIHByaXZhdGUgbW9kZWxzOiB7IFtrZXk6IHN0cmluZ106IElNb2RlbCB9ID0ge307XHJcblxyXG4gICAgICAgIHB1YmxpYyByZWdpc3Rlck1vZGVsKGtleTogc3RyaW5nLCBtb2RlbDogSU1vZGVsKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGVsc1trZXldKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYE1vZGVscyBrZXk6JHtrZXl9IGhhcyBhbHJlYWR5IGV4aXRzYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsc1trZXldID0gbW9kZWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1bnJlZ2lzdGVyTW9kZWwoa2V5OiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZWxzW2tleV0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbHNba2V5XSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5tb2RlbHNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9idGFpbk1vZGVsKGtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vZGVsc1trZXldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGFzcyBWaWV3ICB7XHJcbiAgICAgICAgcHJpdmF0ZSBfa2V5czogQXJyYXk8bmV3ICgpID0+IElWaWV3PjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlt7Lms6jlhoznmoRVSVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIC8vIHByaXZhdGUgX3ZpZXdzOiBJVmlld1tdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOW8gOWQr+S4rVVJXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSB2aWV3czogeyBba2V5OiBzdHJpbmddOiBJVmlldyB9ID0ge307XHJcblxyXG4gICAgICAgIHByaXZhdGUgX29wZW5zOiBJVmlld1tdO1xyXG5cclxuICAgICAgICBwcml2YXRlIF9jbG9zZXM6IElWaWV3W107XHJcblxyXG4gICAgICAgIHByaXZhdGUgX2Nsb3Nlc1RpbWU6IG51bWJlcltdO1xyXG5cclxuICAgICAgICBwcml2YXRlIF9kZXN0cm95ZWQ6IHsgdmlldzogSVZpZXcsIGtleTogbmV3ICgpID0+IElWaWV3IH1bXTtcclxuXHJcbiAgICAgICAgcHVibGljIHJlZ2lzdGVyVmlldyhrZXk6c3RyaW5nLCB2aWV3OklWaWV3KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudmlld3Nba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBNb2RlbHMga2V5OiR7a2V5fSBoYXMgYWxyZWFkeSBleGl0c2ApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3c1trZXldID0gdmlldztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVucmVnaXN0ZXJWaWV3KGtleTpzdHJpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGhpcy52aWV3c1trZXldICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlld3Nba2V5XSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy52aWV3c1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2J0YWluVmlldyhrZXk6c3RyaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld3Nba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW50ZXJmYWNlIElWaWV3IHtcclxuICAgICAgICB1cmw6c3RyaW5nO1xyXG4gICAgICAgIHZpZXdPYmo6TGF5YS5WaWV3O1xyXG4gICAgICAgIG9wZW5WaWV3KGNsb3NlT3RoZXI/OmJvb2xlYW4sIHBhcmFtPzp7fSk7XHJcbiAgICAgICAgb25WaWV3TG9hZGVkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xhc3MgVmlld0Jhc2V7XHJcbiAgICAgICAgcHVibGljIHVybDpzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIHZpZXdPYmo6TGF5YS5WaWV3O1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKHVybCkge1xyXG4gICAgICAgICAgICB0aGlzLnVybCA9IHVybDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIG9wZW5WaWV3KGNsb3NlT3RoZXI6Ym9vbGVhbiA9IHRydWUsIHBhcmFtOnt9ID0ge30pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMYXlhLlNjZW5lLm9wZW4odGhpcy51cmwsIGNsb3NlT3RoZXIsIHBhcmFtLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3T2JqID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImxvYWQgbGF5YSB2aWV3IHN1Y2Nlc3NcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblZpZXdMb2FkZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJ2aWV3IGlzIG5vdCBmb3VuZGVkLCBwbGVhc2UgY2hlY2sgdXJsXCIpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSksIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIG9uVmlld0xvYWRlZCgpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW50ZXJmYWNlIElNb2RlbCB7XHJcbiAgICB9XHJcbiAgICBjbGFzcyBNb2RlbEJhc2Uge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGludGVyZmFjZSBJQ29udHJvbGxlciB7XHJcbiAgICAgICAgZXhlY3V0ZShwYXJhbTphbnkpO1xyXG4gICAgfVxyXG4gICAgY2xhc3MgQ29udHJvbGxlckJhc2Uge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzIExvZ2luVmlldyBleHRlbmRzIFZpZXdCYXNlIGltcGxlbWVudHMgSVZpZXd7XHJcbiAgICAgICAgY29uc3RydWN0b3IodXJsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3VwZXIodXJsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHNjZW5lOkxheWEuTm9kZTtcclxuICAgICAgICBwdWJsaWMgb25WaWV3TG9hZGVkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICh0aGlzLnZpZXdPYmogYXMgdWkudGVzdC50ZXN0VUkpLmJ0bjEub24oTGF5YS5FdmVudC5NT1VTRV9ET1dOLCB0aGlzLnZpZXdPYmosIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAodGhpcy52aWV3T2JqIGFzIHVpLnRlc3QudGVzdFVJKS5sb2dpbl93b3JsZF9iZy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBMYXlhLlNjZW5lM0QubG9hZChcInJlcy9Db252ZW50aW9uYWwvZGVtby5sc1wiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIExheWEuc3RhZ2UuYWRkQ2hpbGQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgTGF5YS5TcHJpdGUzRC5sb2FkKFwicmVzL0NvbnZlbnRpb25hbC9XYWxsX1N0b25lX2VsMS5saFwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIGZ1bmN0aW9uKHNwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5hZGRDaGlsZChzcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKSk7XHJcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpKVxyXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICAgICAgKHRoaXMudmlld09iaiBhcyAgdWkudGVzdC50ZXN0VUkpLmJ0bjIub24oTGF5YS5FdmVudC5NT1VTRV9ET1dOLCB0aGlzLnZpZXdPYmosIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAodGhpcy52aWV3T2JqIGFzICB1aS50ZXN0LnRlc3RVSSkubG9naW5fc2VsZWN0X2JnLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHZhciBhID0gbmV3IFNvbihcIm15IG5hbWVcIik7XHJcbiAgICAgICAgICAgICAgICBhLlByaW50TmFtZSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNvY2tldCA9IHdpbmRvd1snaW8nXSgpO1xyXG4gICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJzb2NrZXRJb1Rlc3RcIiwge3BhY2thZ2U6MTIzfSk7XHJcbiAgICAgICAgICAgICAgICBzb2NrZXQub24oXCJTZXJ2ZXJTZW5kTXNnXCIsIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzIExvZ2luQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXJCYXNlIGltcGxlbWVudHMgSUNvbnRyb2xsZXIgIHtcclxuICAgICAgICBwdWJsaWMgZXhlY3V0ZShwYXJhbSkgIHtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzIExvZ2luTW9kZWwgZXh0ZW5kcyBNb2RlbEJhc2UgaW1wbGVtZW50cyBJTW9kZWx7XHJcbiAgICB9XHJcbn1cclxuXHJcbiJdfQ==
